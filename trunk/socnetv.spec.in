%define name    socnetv
%define version @PACKAGE_VERSION@
%define release 1
%define prefix  @ac_prefix@


%define is_mandrake %(test -e /etc/mandrake-release && echo 1 || echo 0)
%define is_suse %(test -e /etc/SuSE-release && echo 1 || echo 0)
%define is_fedora %(test -e /etc/fedora-release && echo 1 || echo 0)
%define qmake qmake
%define lrelease lrelease



%if %{is_fedora}
%define distr %(cat /etc/fedora-release)
%define qmake qmake-qt4
%define lrelease lrelease-qt4
%endif

%if %{is_suse}
%define distr %(head -1 /etc/SuSE-release)
%endif

%if %{is_mandrake}
%define distr %(cat /etc/mandrake-release)
%endif



Name:		%{name}
Summary:	A Social Networks Analyser and Visualiser
License:	GPLv3
Group:		Science/Mathematics
URL:		http://socnetv.sourceforge.net/
Version:	%{version}
Release:	%{release}

Prefix:		%{prefix}

Source0:	SocNetV-%{version}.tar.bz2

Distribution:   %{distr}

BuildRoot:	%{_tmppath}/%{name}-%{version}-%{release}-buildroot

%if %{is_fedora}
BuildRequires:  qt-devel >= 4.4 
BuildRequires:  qt-x11 >= 4.4
%endif

%if %{is_suse}
BuildRequires:  libqt4-devel >= 4.4 
BuildRequires:  libQtWebKit4 >= 4.4
%endif

%if %{is_mandrake}
BuildRequires:  libqt4-devel >= 4.4 
BuildRequires:  libqtwebkit4 >= 4.4  
%endif




%description
SocNetV (Social Networks Visualiser) is a flexible and 
user-friendly tool for Social Networks Analysis and Visualisation. 
It lets you create new networks (graphs) with a few clicks on a 
virtual canvas or load networks of various formats (GraphViz, 
GraphML, Adjacency, Pajek, etc) and modify them to suit your needs.

The application can compute network properties, such as density, 
diameter and distances, as well as node and network centralities. 
Various layout algorithms (i.e. Spring-embedder, circular and in 
levels according to centralities) are supported for meaningful 
visualisations of your networks. Furthermore, simple random 
networks (lattice, same degree, etc) can be created. 

Author: Dimitris V. Kalamaras <dimitris.kalamaras@gmail.com>

%prep
%setup 
[ -f Makefile.cvs ] && %__make -f Makefile.cvs

%build
%configure
%__make

%install
%suse_update_desktop_file %{name} Math Visualiser
%makeinstall

%clean
[ -d %{buildroot} -a "%{buildroot}" != "" ] && %__rm -rf  %{buildroot}


%define lastrev %(LANG=en_US.UTF-8 && date +"%a %b %e %Y")

%files
%defattr(-,root,root)

 
%{_bindir}/%{name}
%{_datadir}/applications/%{name}.desktop
%{_datadir}/pixmaps/%{name}.png
%{_datadir}/doc/%{name}/ChangeLog
%{_datadir}/doc/%{name}/NEWS
%{_datadir}/doc/%{name}/README
%{_datadir}/doc/%{name}/TODO
%{_datadir}/doc/%{name}/COPYING
%{_datadir}/doc/%{name}/AUTHORS
%{_datadir}/doc/%{name}/manual/analysis.html
%{_datadir}/doc/%{name}/manual/bugs.html
%{_datadir}/doc/%{name}/manual/credits.html
%{_datadir}/doc/%{name}/manual/footer.html
%{_datadir}/doc/%{name}/manual/formats.html
%{_datadir}/doc/%{name}/manual/gui.html
%{_datadir}/doc/%{name}/manual/header.html
%{_datadir}/doc/%{name}/manual/intro.html
%{_datadir}/doc/%{name}/manual/manual.html
%{_datadir}/doc/%{name}/manual/socnetv.css
%{_datadir}/doc/%{name}/manual/socnetv.png
%{_datadir}/doc/%{name}/manual/toc.html
%{_datadir}/doc/%{name}/manual/visualisation.html

%changelog
* Tue Jan 14 2008 Dimitris Kalamaras <dimitris.kalamaras@gmail.com>
0.49-2
Package .spec fixes
* Tue Jan 13 2008 Dimitris Kalamaras <dimitris.kalamaras@gmail.com>
0.49-1
Updated to 0.49
* Wed Sep 17 2008  Dimitris Kalamaras <dimitris.kalamaras@gmail.com>
0.48-1
- First RPM release
